<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Catálogo de filmes</title>
        <!-- CSS only -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        
        <script src="xmltojson.js"></script>

        <script>

            function getFilmes() {
                let xmlHttp = new XMLHttpRequest();
                xmlHttp.open('GET', 'http://localhost/estudo_ajax/filmes.xml')

                xmlHttp.onreadystatechange = () => {
                    if(xmlHttp.readyState == 4 && xmlHttp.status == 200){

                        let XMLFilmes = xmlHttp.responseText
                        
                        let parser = new DOMParser()
                        domFilmes = parser.parseFromString(XMLFilmes, 'text/xml')
                        console.log(domFilmes)
                        jsonFilmes = xmlToJson(domFilmes)

                        console.log(jsonFilmes)
                    }
                    if(xmlHttp.readystate == 4 && xmlHttp.status == 404){
                        console.log(xmlHttp.status)
                    }
                }

                xmlHttp.send()
            }

        </script>
    </head>
    <body>
        <nav class="navbar navbar-light bg-light mb-4">
            <div class="container">
                <div class="navbar-brand mb-0 h1">
                    <h3>Catálogo de filmes</h3>
                </div>
            </div>
        </nav>

        <div class="container">
            <div class="row">
                <div class="col">
                    <button type="button" class="btn btn-danger" onclick="getFilmes()">Listar Filmes</button>
                </div>
            </div>
        </div>

    </body>
</html>